<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <meta http-equiv="X-UA-Compatible" content="ie=edge"> -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://kit.fontawesome.com/9479635e2b.js"></script>
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
    integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  
  <title></title>
</head>
<body>
    <div class="main_content">

        <div class="progressWrapper text-center">
            <div id="progressDiv_1" class="glowBorder">
              <div id="progress_1"></div>
            </div>
            <div id="progressDiv_2">
              <div id="progress_2"></div>
            </div>
            <div id="progressDiv_3">
              <div id="progress_3"></div>
            </div>
            <div id="progressDiv_4">
              <div id="progress_4"></div>
            </div>
            <div id="progressDiv_5">
              <div id="progress_5"></div>
            </div>
            <div id="progressDiv_6">
              <div id="progress_6"></div>
            </div>
          </div>

      <div class="upitnik_wrapper">
        <div class="pitanjaDiv text-center"></div>


      </div>

      <div class="product_wrapper border border-primary hide">
        <div class="block1 text-center">
          <h1>Izabrani proizvodi (u odnosu na checkbox odgovore)</h1>
        </div>
        <div class="productsDiv container">
          <div class="products row justify-content-center">
            

          </div>
        </div>

        <div class="block2 text-center">
          <h1>Mi vam preporucujemo (u odnosu na odgovore na pitanja)</h1>
        </div>
        <div class="otherProductsDiv">
          <div class="other_products justify-content-center border border-primary">
            


          </div>
        </div>
      </div>
              
        
      
      

    </div>


<script type="application/javascript">

  window.onload = function() { 

//****************************************************************HTML STRINGS***************************************************************************************************
    var HTML = function () {
      return {
        1: `<div class="pitanjaDiv">
              <h1 class="text-center">Pol</h1>
              <div id="strana_1" class="row border border-primary">
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_1_1" type="button" class="btn btn-primary" value="next" data-key="" data-value="Muski" data-goto="${page}">Muški</button>
                </div>

                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_1_2" type="button" class="btn btn-primary" value="next" data-key="" data-value="Zenski" data-goto="${page}">Ženski</button>
                </div>
                  
                <div id="3" class="col-sm text-center border border-primary p-4">
                  <button id="btn_1_3" type="button" class="btn btn-primary" value="next" data-key="" data-value="Ne znam" data-goto="${page}">Ne znam</button>
                </div>
              </div>
            </div>`,
        
        2: `<div class="pitanjaDiv">
              <h1 class="text-center">Godine</h1>
              <div id="strana_1" class="row border border-primary">
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_2_1" type="button" class="btn btn-primary" value="next" data-key="" data-value="16-34" data-goto="${page}">16-34</button>
                </div>

                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_2_2" type="button" class="btn btn-primary" value="next" data-key="" data-value="35-49" data-goto="${page}">35-49</button>
                </div>
                  
                <div id="3" class="col-sm text-center border border-primary p-4">
                  <button id="btn_2_3" type="button" class="btn btn-primary" value="next" data-key="" data-value="50+" data-goto="${page}">50+</button>
                </div>
              </div>
            </div>`,
        
        3: `<div class="pitanjaDiv">
              <h1 class="text-center">Fizička aktivnost</h1>
              <div id="strana_2" class="row border border-primary">
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_3_1" type="button" class="btn btn-primary" value="next" data-key="4" data-value="Ne treniram" data-goto="${page}">Ne treniram</button>
                </div>
              
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_3_2" type="button" class="btn btn-primary" value="next" data-key="0" data-value="Ponekad treniram" data-goto="${page}">Ponekad treniram</button>
                </div>
              
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_3_3" type="button" class="btn btn-primary" value="next" data-key="3" data-value="Redovno treniram" data-goto="${page}">Redovno treniram</button>
                </div>
              </div>
              <button id="prev" type="button" class="btn btn-primary" data-goto="${page}">Nazad</button>
            </div>`,

        4: `<div class="pitanjaDiv">
              <h1 class="text-center">Kakav Vam je san</h1>
              <div id="strana_3" class="row border border-primary">
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_4_1" type="button" class="btn btn-primary" value="next" data-key="" data-value="Spavam kao beba" data-goto="${page}">Spavam kao beba</button>
                </div>
              
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_4_2" type="button" class="btn btn-primary" value="next" data-key="5" data-value="Cesto se budim nocu" data-goto="${page}">Često se budim noću</button>
                </div>
              
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_4_3" type="button" class="btn btn-primary" value="next" data-key="5" data-value="Ne mogu da se uspavam dugo" data-goto="${page}">Ne mogu da se uspavam dugo</button>
                </div>
              </div>
              <button id="prev" type="button" class="btn btn-primary" data-goto="${page}">Nazad</button>
            </div>`,
        
        5: `<div class="pitanjaDiv">
              <h1 class="text-center">Kakav Vam je krvni pritisak</h1>
              <div id="strana_4" class="row border border-primary">
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_5_1" type="button" class="btn btn-primary" value="next" data-key="" data-value="Ne kontrolisem" data-goto="${page}">Ne kontrolišem</button>
                </div>
              
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_5_2" type="button" class="btn btn-primary" value="next" data-key="2" data-value="Normalan ili ponekad povecan kada smo nervozni" data-goto="${page}">Normalan ili ponekad povećan kada smo nervozni</button>
                </div>
              
                <div class="col-sm text-center border border-primary p-4">
                  <button id="btn_5_3" type="button" class="btn btn-primary" value="next" data-key="1" data-value="Imam hipertenziju" data-goto="${page}">Imam hipertenziju</button>
                </div>
              </div>
              <button id="prev" type="button" class="btn btn-primary" data-goto="${page}">Nazad</button>
            </div>`,

        /* 6: `<form class="checkboxForm" action="#">
            <table class="table table-bordered">
            <tbody>

              <tr class="text-center border-primary">
                <td class="text-center border-primary field" id="kontrola_stresa" data-check="6" onclick="selected(this)">
                  <img src="./img/karakteristike/cardio-ikona-kontrola-stresa1.png">
                  <p>kontrola stresa</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="kontrola_stresa">
                    </div>
                  </div>
                </td>

                <td class="text-center border-primary field" id="srce" data-check="5" onclick="selected(this)">
                  <img src="./img/karakteristike/cardio-ikona-kontrola-stresa1.png">
                  <p>srce</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input"data-value="srce">
                    </div>
                  </div>
                </td>

                <td class="text-center border-primary field" id="imunitet" data-check="7" onclick="selected(this)">
                  <img src="./img/karakteristike/imuno-ikona-imunitet.png">
                  <p>imunitet </p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="imunitet">
                    </div
                  </div>
                </td>
              </tr>

              <tr class="text-center border-primary">
                <td class="text-center border-primary field" id="energija" data-check="0" onclick="selected(this)">
                  <img src="./img/karakteristike/mineral-ikona-energija.png">
                  <p>energija</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="energija">
                    </div>
                  </div
                </td>

                <td class="text-center border-primary field" id="dobar_san" data-check="8" onclick="selected(this)">
                  <img src="./img/karakteristike/relax-ikona-kontrola-stresa.png">
                  <p>dobar san</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="dobar_san">
                    </div>
                  </div>
                </td>

                <td class="text-center border-primary field" id="misici" data-check="1" onclick="selected(this)">
                  <img src="./img/karakteristike/mineral-ikona-misici.png">
                  <p>misici </p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="misici">
                    </div>
                  </div>
                </td>
              </tr>
              
              <tr class="text-center ">
                <td class="text-center border-primary field" id="nervni_sistem" data-check="2" onclick="selected(this)">
                  <img src="./img/karakteristike/mineral-ikona-nervni-sistem.png">
                  <p>nervni sistem</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="nervni_sistem">
                    </div>
                  </div>
                </td>

                <td class="text-center border-primary field" id="laka_primena" data-check="3" onclick="selected(this)">
                  <img src="./img/karakteristike/direct-ikona-laka-upotreba.png">
                  <p>laka primena</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="laka_primena">
                    </div>
                  </div>
                </td>

                <td class="text-center border-primary field" id="metabolizam" data-check="4" onclick="selected(this)">
                  <img src="./img/karakteristike/sleep-ikona-metabolizam.png">
                  <p>metabolizam</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="metabolizam">
                    </div>
                  </div>
                </td>
              </tr>

            </tbody>
          </table>
          </br>
          <div class="text-center">
          <button id="submit" type="button" class="btn btn-primary" value="submit">Submit</button>
          </div>
          </form>`, */
        
        6: ` <form>
              <div class="container checkboxForm">

              <div class="row text-center">
                <div class="col-4 text-center field" id="kontrola_stresa" data-check="6" onclick="selected(this)">
                  <img src="./img/karakteristike/cardio-ikona-kontrola-stresa1.png">
                  <p>kontrola stresa</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="kontrola_stresa">
                    </div>
                  </div>
                </div>
                <div class="col-4 text-center field" id="srce" data-check="5" onclick="selected(this)">
                  <img src="./img/karakteristike/cardio-ikona-kontrola-stresa1.png">
                  <p>srce</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input"data-value="srce">
                    </div>
                  </div>
                </div>
                <div class="col-4 text-center field" id="imunitet" data-check="7" onclick="selected(this)">
                  <img src="./img/karakteristike/imuno-ikona-imunitet.png">
                  <p>imunitet </p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="imunitet">
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="row text-center">
                <div class="col-4 text-center field" id="energija" data-check="0" onclick="selected(this)">
                  <img src="./img/karakteristike/mineral-ikona-energija.png">
                  <p>energija</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="energija">
                    </div>
                  </div>
                </div>
                <div class="col-4 text-center field" id="dobar_san" data-check="8" onclick="selected(this)">
                  <img src="./img/karakteristike/relax-ikona-kontrola-stresa.png">
                  <p>dobar san</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="dobar_san">
                    </div>
                  </div>
                </div>
                <div class="col-4 text-center field" id="misici" data-check="1" onclick="selected(this)">
                  <img src="./img/karakteristike/mineral-ikona-misici.png">
                  <p>misici </p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="misici">
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="row text-center">
                <div class="col-4 text-center field" id="nervni_sistem" data-check="2" onclick="selected(this)">
                  <img src="./img/karakteristike/mineral-ikona-nervni-sistem.png">
                  <p>nervni sistem</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="nervni_sistem">
                    </div>
                  </div>
                </div>
                <div class="col-4 text-center field" id="laka_primena" data-check="3" onclick="selected(this)">
                  <img src="./img/karakteristike/direct-ikona-laka-upotreba.png">
                  <p>laka primena</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="laka_primena">
                    </div>
                  </div>
                </div>
                <div class="col-4 text-center field" id="metabolizam" data-check="4" onclick="selected(this)">
                  <img src="./img/karakteristike/sleep-ikona-metabolizam.png">
                  <p>metabolizam</p>
                  <div class="checkbox_overlay">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" data-value="metabolizam">
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="text-center">
              <button id="submit" type="button" class="btn btn-primary" value="submit">Submit</button>
            </div>
            </form>`,
        direct: `<div id="direct" class="card col-6">
                  <img class="card-img-top" src="./img/proizvodi/direct.jpg" alt="proizvod 1 slika">
                  <div class="card-body">
                    <h5 class="card-title">Proizvod 1</h5>
                    <p class="card-text">Ovo je proizvod 1 i mnogo je dobar</p>
                    <a href="#" class="btn btn-primary">Detaljnije</a>
                  </div>
                </div>`,
        cardio: `<div id="cardio" class="card col-6" >
                  <img class="card-img-top" src="./img/proizvodi/cardio.jpg" alt="proizvod 2 slika">
                  <div class="card-body">
                    <h5 class="card-title">Proizvod 2</h5>
                    <p class="card-text">Ovo je proizvod 2 i mnogo je dobar</p>
                    <a href="#" class="btn btn-primary">Detaljnije</a>
                  </div>
                </div>`,
        relax: `<div id="relax" class="card col-6">
                  <img class="card-img-top" src="./img/proizvodi/relax.jpg" alt="proizvod 3 slika">
                  <div class="card-body">
                    <h5 class="card-title">Proizvod 3</h5>
                    <p class="card-text">Ovo je proizvod 3 i mnogo je dobar</p>
                    <a href="#" class="btn btn-primary">Detaljnije</a>
                  </div>
                </div>`,
        immuno: `<div id="immuno" class="card col-6">
                  <img class="card-img-top" src="./img/proizvodi/immuno.jpg" alt="proizvod 4 slika">
                  <div class="card-body">
                    <h5 class="card-title">Proizvod 4</h5>
                    <p class="card-text">Ovo je proizvod 4 i mnogo je dobar</p>
                    <a href="#" class="btn btn-primary">Detaljnije</a>
                  </div>
                </div>`,
        mineral: `<div id="mineral" class="card col-6">
                    <img class="card-img-top" src="./img/proizvodi/mineral.jpg" alt="proizvod 4 slika">
                    <div class="card-body">
                      <h5 class="card-title">Proizvod 5</h5>
                      <p class="card-text">Ovo je proizvod 5 i mnogo je dobar</p>
                      <a href="#" class="btn btn-primary">Detaljnije</a>
                    </div>
                  </div>`,
        sleep: `<div id="sleep" class="card col-6">
                  <img class="card-img-top" src="./img/proizvodi/sleep.jpg" alt="proizvod 6 slika">
                  <div class="card-body">
                    <h5 class="card-title">Proizvod 6</h5>
                    <p class="card-text">Ovo je proizvod 6 i mnogo je dobar</p>
                    <a href="#" class="btn btn-primary">Detaljnije</a>
                  </div>
                </div>`,
        ostalidirect: `<div id="direct" class="card">
                        <img class="card-img-top" src="./img/proizvodi/direct.jpg" alt="proizvod 1 slika">
                        <div class="card-body">
                          <h5 class="card-title">Proizvod 1</h5>
                          <p class="card-text">Ovo je proizvod 1 i mnogo je dobar</p>
                          <a href="#" class="btn btn-primary">Detaljnije</a>
                        </div>
                      </div>`,
        ostalicardio: `<div id="cardio" class="card" >
                        <img class="card-img-top" src="./img/proizvodi/cardio.jpg" alt="proizvod 2 slika">
                        <div class="card-body">
                          <h5 class="card-title">Proizvod 2</h5>
                          <p class="card-text">Ovo je proizvod 2 i mnogo je dobar</p>
                          <a href="#" class="btn btn-primary">Detaljnije</a>
                        </div>
                      </div>`,
        ostalirelax: `<div id="relax" class="card">
                        <img class="card-img-top" src="./img/proizvodi/relax.jpg" alt="proizvod 3 slika">
                        <div class="card-body">
                          <h5 class="card-title">Proizvod 3</h5>
                          <p class="card-text">Ovo je proizvod 3 i mnogo je dobar</p>
                          <a href="#" class="btn btn-primary">Detaljnije</a>
                        </div>
                      </div>`,
        ostaliimmuno: `<div id="immuno" class="card">
                        <img class="card-img-top" src="./img/proizvodi/immuno.jpg" alt="proizvod 4 slika">
                        <div class="card-body">
                          <h5 class="card-title">Proizvod 4</h5>
                          <p class="card-text">Ovo je proizvod 4 i mnogo je dobar</p>
                          <a href="#" class="btn btn-primary">Detaljnije</a>
                        </div>
                      </div>`,
        ostalimineral: `<div id="mineral" class="card">
                          <img class="card-img-top" src="./img/proizvodi/mineral.jpg" alt="proizvod 4 slika">
                          <div class="card-body">
                            <h5 class="card-title">Proizvod 5</h5>
                            <p class="card-text">Ovo je proizvod 5 i mnogo je dobar</p>
                            <a href="#" class="btn btn-primary">Detaljnije</a>
                          </div>
                        </div>`,
        ostalisleep: `<div id="sleep" class="card">
                        <img class="card-img-top" src="./img/proizvodi/sleep.jpg" alt="proizvod 6 slika">
                        <div class="card-body">
                          <h5 class="card-title">Proizvod 6</h5>
                          <p class="card-text">Ovo je proizvod 6 i mnogo je dobar</p>
                          <a href="#" class="btn btn-primary">Detaljnije</a>
                        </div>
                      </div>`,
      }
    }
//***********************************



//********************Initialization************************************************
    // DOM Elements
    var DOM = {
      upitnik_wrapper : document.querySelector('.upitnik_wrapper'),
      product_wrapper : document.querySelector('.product_wrapper'),
      other_products : document.querySelector('.other_products'),
      product : document.querySelector('.product'),
      products : document.querySelector('.products'),
      block1 : document.querySelector('.block1'),
      block2: document.querySelector('.block2'),
      checkboxField : document.querySelector('.field')
    };

    // Initialization
    var page = 1;
    var answersArr = [];
    var checkedValues = [];
    var recommendedProducts = [];
    var jsonAnswers;
    var productListArr = ['direct','cardio','relax','immuno','mineral','sleep'];
    var products = {
      direct: ['energija', 'misici', 'nervni_sistem', 'laka_primena', 'metabolizam'],
      cardio: ['energija', 'misici', 'srce'],
      relax: ['nervni_sistem', 'kontrola_stresa', 'energija', 'misici'],
      immuno: ['imunitet', 'energija', 'misici', 'nervni_sistem'],
      mineral: ['energija', 'misici', 'metabolizam', 'nervni_sistem'],
      sleep: ['energija', 'misici', 'nervni_sistem', 'dobar_san'],
    }
    var uncheckList = [
      [''], //energija
      [''], //misici
      ['srce'], //nervni_sisiem
      ['srce', 'kontrola_stresa', 'imunitet', 'dobar_san'], // laka_primena
      ['srce', 'kontrola_stresa', 'imunitet', 'dobar_san'], // metabolizam
      ['nervni_sistem', 'laka_primena', 'metabolizam', 'kontrola_stresa', 'imunitet', 'dobar_san'], // srce
      ['laka_primena', 'metabolizam', 'srce', 'imunitet', 'dobar_san'], // kontrola_stresa
      ['laka_primena', 'metabolizam', 'srce', 'kontrola_stresa', 'dobar_san'], // imunitet
      ['laka_primena', 'metabolizam', 'srce', 'kontrola_stresa', 'imunitet',] // dobar_san
    ]
    var matchingProducts = {
        direct : [],
        cardio : [],
        relax : [],
        immuno: [],
        mineral: [],
        sleep: [],
      };
    var sortByLength = new Array;

//********************************



//************************RENDER PAGES************************************************
    // on load show first page
    DOM.upitnik_wrapper.innerHTML = HTML()[page];

    // show next page
    function showNextPage() {
        page++;
        DOM.upitnik_wrapper.innerHTML = HTML()[page];
    }

    // show previous page
    function showPrevPage() {
      page--;
      DOM.upitnik_wrapper.innerHTML = HTML()[page];
    }


//********************************



//******************************************UI****************************************************************************************
    function loadProgress() {
      var progressBar = document.getElementById(`progress_${page - 1}`); 
      var width = 1;
      var id = setInterval(bar, 1);
      function bar() {
        if (width >= 100) {
          clearInterval(id);
        } else {
          width++; 
          progressBar.style.width = width + '%'; 
        }
      }
    }
    function unloadProgress() {
      var progressBar = document.getElementById(`progress_${page}`);
      var width = 100;
      var id = setInterval(bar, 1);
      function bar() {
        if (width <= 0) {
          clearInterval(id);
        } else {
          width--; 
          progressBar.style.width = width + '%'; 
        }
      }
    }
    function addGlowBorder() {
      var currentBar = document.getElementById(`progressDiv_${page}`);
      var barBefore = document.getElementById(`progressDiv_${page - 1}`);
      var barNext = document.getElementById(`progressDiv_${page + 1}`);
      var clear = setInterval(current, 350);

      function current() {
        if(currentBar) {
          currentBar.classList.add('glowBorder');
          clearInterval(clear);
          barBefore.classList.remove('glowBorder');
        }
      }
    }
    function removeGlowBorder() {
      var barNext = document.getElementById(`progressDiv_${page + 1}`);
      var currentBar = document.getElementById(`progressDiv_${page}`);
      barNext.classList.remove('glowBorder');
      currentBar.classList.add('glowBorder');
    }
    
    


//********************************

    

//***************************SAVE, DELETE, PUSH, MATCH********************************
    // save answer on user input
    function saveAnswer() {
      /* var answer = event.target.id.split('_')[2]; */
      var answer = event.target.dataset.value;
      answersArr.push(answer);
      
    }

    // delete last answer on prev button
    function deleteAnswer(arr) {
      if(arr.length !== 0) {
        arr.pop();
      }
    }

    // adds checked answers to array //for showProduct function
    function saveCheckedValues() {
      var form = event.target.form;
      for (var i = 0; i < form.length; i++) {
        if (form[i].checked) {
          var checkedBoxName = form[i].dataset.value;
          checkedValues.push(checkedBoxName);
        }
      }
    }
    
    //pushes data-key values to recommendedProducts = [] to be shown as recommended products 
    function pushDataKey() {
      var dataKey = event.target.dataset.key;
      if(dataKey !== '') {
        recommendedProducts.push(productListArr[dataKey]);
      }
    }

    // Push matching answers to matchingProducts
    function pushMatchingAnswers(checkedAnswersArr, proizvod1Arr, proizvod2Arr, proizvod3Arr, proizvod4Arr, proizvod5Arr, proizvod6Arr) {
      checkedAnswersArr.forEach( (e1) => proizvod1Arr.forEach( (e2) => proizvod2Arr.forEach((e3) => proizvod3Arr.forEach((e4) => proizvod4Arr.forEach((e5) => proizvod5Arr.forEach((e6) => proizvod6Arr.forEach((e7) => {
        if(e1 === e2) {
          matchingProducts.direct.indexOf(e2) === -1 ? matchingProducts.direct.push(e2) : '';
        }

        if(e1 === e3) {
          matchingProducts.cardio.indexOf(e3) === -1 ? matchingProducts.cardio.push(e3) : '';
        }

        if(e1 === e4) {
          matchingProducts.relax.indexOf(e4) === -1 ? matchingProducts.relax.push(e4) : '';
        }
        if (e1 === e5) {
          matchingProducts.immuno.indexOf(e5) === -1 ? matchingProducts.immuno.push(e5) : '';
        }
        if (e1 === e6) {
          matchingProducts.mineral.indexOf(e6) === -1 ? matchingProducts.mineral.push(e6) : '';
        }
        if (e1 === e7) {
          matchingProducts.sleep.indexOf(e7) === -1 ? matchingProducts.sleep.push(e7) : '';
        }

      } )))))));
    }
      
    // Push matched answers from user input
    function sortProducts() {
      var proizvod1Length = matchingProducts.direct.length;
      var proizvod2Length = matchingProducts.cardio.length;
      var proizvod3Length = matchingProducts.relax.length;
      var proizvod4Length = matchingProducts.immuno.length;
      var proizvod5Length = matchingProducts.mineral.length;
      var proizvod6Length = matchingProducts.sleep.length;




      sortByLength['direct'] = proizvod1Length;
      sortByLength['cardio'] = proizvod2Length;
      sortByLength['relax'] = proizvod3Length;
      sortByLength['immuno'] = proizvod4Length;
      sortByLength['mineral'] = proizvod5Length;
      sortByLength['sleep'] = proizvod6Length;
    }

    // Find best match for the given answers
    function closest(array, num) {
      var i = 0;
      var minDiff = 1000;
      var ans;
      for (i in array) {
        var m = Math.abs(num - array[i]);
        if (m < minDiff) {
          minDiff = m;
          ans = array[i];
        }
      }

      return ans;
    }

//*******************************



//************************DISABLE CHECKBOXES******************************************************************
    // add disabled className to non matching characteristics
    function addDisableClass(currentFieldNum) {
      uncheckList[currentFieldNum].forEach(function(element) {
        if (element != '') {
          document.getElementById(element).className += ' disable';
        }
      })
    }
    // remove disabled className to non matching characteristics
    function removeDisableClass(currentFieldNum) {
      uncheckList[currentFieldNum].forEach(function (element) {
        if (element != '') {
          var classNames = document.getElementById(element).className;
          var classNamesToAppend = classNames.slice(0, -7);
          document.getElementById(element).className = classNamesToAppend;
        }
      })
    }
    // check current checkbox
    function checkTheCheckbox(currentCheckbox, currentField) {
        currentCheckbox.checked = true;
    }
    // uncheck current checkbox
    function uncheckTheCheckbox(currentCheckbox) {
      currentCheckbox.checked = false;
    }


    // manipulate checkboxes
    function manageCheckboxes(event) {
      var currentField = event.target.closest('.field');
      var currentCheckbox = currentField.querySelector('.form-check-input');
      var currentFieldNum = parseInt(currentField.dataset.check);
      
      if(currentCheckbox.checked == false) {
        if(!currentField.classList.contains('disable')) {
          addDisableClass(currentFieldNum);
          checkTheCheckbox(currentCheckbox, currentField);
        } else {
          return;
        }
      } else {
        removeDisableClass(currentFieldNum);
        uncheckTheCheckbox(currentCheckbox);
      }
    }


//*************************************************************************************************************


//********************SHOW MATCHED PRODUCTS********************************************************************
    

    // Show products depending on checkbox answers
    function showProducts() {
      DOM.upitnik_wrapper.outerHTML = "";
      
      DOM.product_wrapper.classList.add("show");
      DOM.product_wrapper.classList.remove("hide");
      
      if (sortByLength['direct'] == closest(sortByLength, 10)) {
        //insert into mian wrapper 
        DOM.products.insertAdjacentHTML('afterbegin', HTML().direct);
        
      } 
      if (sortByLength['cardio'] == closest(sortByLength, 10)) {
        //insert into main wrapper
        DOM.products.insertAdjacentHTML('afterbegin', HTML().cardio);
      } 
      if (sortByLength['relax'] == closest(sortByLength, 10)) {
        //insert into main wrapper 
        DOM.products.insertAdjacentHTML('afterbegin', HTML().relax);
      } 
      if (sortByLength['immuno'] == closest(sortByLength, 10)) {
        //insert into mian wrapper 
        DOM.products.insertAdjacentHTML('afterbegin', HTML().immuno);
      } 
      if (sortByLength['mineral'] == closest(sortByLength, 10)) {
        //insert into mian wrapper 
        DOM.products.insertAdjacentHTML('afterbegin', HTML().mineral);
      } 
      if (sortByLength['sleep'] == closest(sortByLength, 10)) {
        //insert into mian wrapper 
        DOM.products.insertAdjacentHTML('afterbegin', HTML().sleep);
      } 
    }

    // shows products depending on button answers
    function showRecommendedProducts() {
      recommendedProducts.forEach(function(element) {
        DOM.other_products.insertAdjacentHTML('afterbegin', HTML()[`ostali${element}`])
      })
    }

//*****************************************



//***********************************************SEND DATA TO PHP FOR STATS***************************************************************
    // make jsonObj for postData
    function makeJson() {
      var answersObj = { ...answersArr };
      jsonAnswers = JSON.stringify(answersObj);
    }

    //sends answers to php script
    function postData() {
      var xhr = new XMLHttpRequest();

      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
          var responce = xhr.responseText;
        }
      }
      xhr.open("POST", "./php/user_input.php", true);
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.send(jsonAnswers);

    }
    
//*****************************************



//**********************************************iNPUT LISTENER*******************************************************
    // user input listener
    DOM.upitnik_wrapper.addEventListener('click', function(event) {
      if (event.target.value == 'next') {
        showNextPage();
        saveAnswer();
        loadProgress();
        addGlowBorder();
        pushDataKey();
      }
      if (event.target.id == 'prev') {
        deleteAnswer(answersArr);
        deleteAnswer(recommendedProducts);
        showPrevPage();
        unloadProgress();
        removeGlowBorder();
      }
      if(event.target.id == 'submit') {
        page++;
        saveCheckedValues();
        pushMatchingAnswers(checkedValues, products.direct, products.cardio, products.relax, products.immuno, products.mineral, products.sleep);
        sortProducts();
        showProducts();
        loadProgress();
        showRecommendedProducts();
        makeJson();
        postData();
      }
      if(event.target.closest('.field')) {
        manageCheckboxes(event);
      }

    });

    
//*****************************************
};

function selected(element) {
    element.classList.toggle('selected');
  }

</script>

</body>
</html>